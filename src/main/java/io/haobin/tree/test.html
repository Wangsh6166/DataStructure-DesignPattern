<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<h1>js test</h1>
</body>

<script>
    var data = [
        {
            "id": 1,
            "pid": 0,
            "type": "0",
            "name": "文章分类",
            "image": "",
            "keywords": "",
            "description": "这里整个分类的根节点",
            "weight": 0,
            "status": 1
        },
        {
            "id": 18,
            "pid": 1,
            "type": "1",
            "name": "基层党建",
            "image": "",
            "keywords": "",
            "description": "基层党建",
            "weight": 0,
            "status": null
        },
        {
            "id": 19,
            "pid": 18,
            "type": "2",
            "name": "铸魂行动",
            "image": "",
            "keywords": "",
            "description": "铸魂行动",
            "weight": 0,
            "status": null
        },
        {
            "id": 20,
            "pid": 19,
            "type": "3",
            "name": "党员教育",
            "image": "",
            "keywords": "",
            "description": "党员教育",
            "weight": 0,
            "status": null
        },
        {
            "id": 21,
            "pid": 19,
            "type": "4",
            "name": "微党课",
            "image": "",
            "keywords": "",
            "description": "微党课",
            "weight": 0,
            "status": null
        },
        {
            "id": 22,
            "pid": 19,
            "type": "5",
            "name": "红色经典",
            "image": "",
            "keywords": "",
            "description": "红色经典",
            "weight": 0,
            "status": null
        },
        {
            "id": 23,
            "pid": 18,
            "type": "6",
            "name": "党建扶贫",
            "image": "",
            "keywords": "",
            "description": "党建扶贫",
            "weight": 0,
            "status": null
        },
        {
            "id": 24,
            "pid": 23,
            "type": "7",
            "name": "驻村帮扶",
            "image": "",
            "keywords": "",
            "description": "驻村帮扶",
            "weight": 0,
            "status": null
        },
        {
            "id": 25,
            "pid": 23,
            "type": "8",
            "name": "示范创建",
            "image": "",
            "keywords": "",
            "description": "示范创建",
            "weight": 0,
            "status": null
        },
        {
            "id": 26,
            "pid": 23,
            "type": "9",
            "name": "集体经济",
            "image": "",
            "keywords": "",
            "description": "集体经济",
            "weight": 0,
            "status": null
        },
        {
            "id": 27,
            "pid": 18,
            "type": "10",
            "name": "党员风采",
            "image": "",
            "keywords": "",
            "description": "党员风采",
            "weight": 0,
            "status": null
        },
        {
            "id": 28,
            "pid": 18,
            "type": "11",
            "name": "组织工作",
            "image": "",
            "keywords": "",
            "description": "相关方面信息报道",
            "weight": 0,
            "status": null
        },
        {
            "id": 29,
            "pid": 1,
            "type": "12",
            "name": "特色黎平",
            "image": "",
            "keywords": "",
            "description": "侗都黎平",
            "weight": 0,
            "status": null
        },
        {
            "id": 30,
            "pid": 29,
            "type": "13",
            "name": "魅力黎平",
            "image": "",
            "keywords": "",
            "description": "魅力侗都",
            "weight": 0,
            "status": null
        },
        {
            "id": 31,
            "pid": 29,
            "type": "14",
            "name": "大歌黎平",
            "image": "",
            "keywords": "",
            "description": "侗族大歌及原创歌曲",
            "weight": 0,
            "status": null
        },
        {
            "id": 32,
            "pid": 29,
            "type": "15",
            "name": "人文黎平",
            "image": "",
            "keywords": "",
            "description": "黎平历史、人文资源",
            "weight": 0,
            "status": null
        },
        {
            "id": 33,
            "pid": 29,
            "type": "16",
            "name": "奋进黎平",
            "image": "",
            "keywords": "",
            "description": "黎平发展专题推送",
            "weight": 0,
            "status": null
        },
        {
            "id": 34,
            "pid": 1,
            "type": "17",
            "name": "纪检监察",
            "image": "",
            "keywords": "",
            "description": "纪检监察",
            "weight": 0,
            "status": null
        },
        {
            "id": 35,
            "pid": 34,
            "type": "18",
            "name": "民生监督",
            "image": "",
            "keywords": "",
            "description": "民生监督",
            "weight": 0,
            "status": null
        },
        {
            "id": 36,
            "pid": 34,
            "type": "19",
            "name": "工作动态",
            "image": "",
            "keywords": "",
            "description": "纪检监察信息动态",
            "weight": 0,
            "status": null
        },
        {
            "id": 37,
            "pid": 34,
            "type": "20",
            "name": "以案警示",
            "image": "",
            "keywords": "",
            "description": "典型案例",
            "weight": 0,
            "status": null
        },
        {
            "id": 38,
            "pid": 34,
            "type": "21",
            "name": "信访举报",
            "image": "",
            "keywords": "",
            "description": "信访举报法规、举报渠道、方式、电话等",
            "weight": 0,
            "status": null
        },
        {
            "id": 39,
            "pid": 1,
            "type": "22",
            "name": "党政动态",
            "image": "",
            "keywords": "",
            "description": "党政动态",
            "weight": 0,
            "status": null
        },
        {
            "id": 40,
            "pid": 39,
            "type": "23",
            "name": "领导之窗",
            "image": "",
            "keywords": "",
            "description": "1.县四家班子领导调研、考察、学习、出席重要活动等工作动态。 2.需要发布的领导重要讲话、批示要求等。",
            "weight": 0,
            "status": null
        },
        {
            "id": 41,
            "pid": 39,
            "type": "24",
            "name": "决策公开",
            "image": "",
            "keywords": "",
            "description": "全县性的重大会议、县委常委会、县政府常务会议、各项专题会议等召开情况。",
            "weight": 0,
            "status": null
        },
        {
            "id": 42,
            "pid": 39,
            "type": "25",
            "name": "政策文件",
            "image": "",
            "keywords": "",
            "description": "政策解读、重要文件发布、重要通知事项等。",
            "weight": 0,
            "status": null
        },
        {
            "id": 43,
            "pid": 1,
            "type": "26",
            "name": "黎平政法",
            "image": "",
            "keywords": "",
            "description": "镇远政法",
            "weight": 0,
            "status": null
        },
        {
            "id": 44,
            "pid": 43,
            "type": "27",
            "name": "综治工作",
            "image": "",
            "keywords": "",
            "description": "综治工作",
            "weight": 0,
            "status": null
        },
        {
            "id": 45,
            "pid": 43,
            "type": "28",
            "name": "维稳工作",
            "image": "",
            "keywords": "",
            "description": "维稳工作",
            "weight": 0,
            "status": null
        },
        {
            "id": 46,
            "pid": 43,
            "type": "29",
            "name": "禁毒工作",
            "image": "",
            "keywords": "",
            "description": "禁毒工作",
            "weight": 0,
            "status": null
        },
        {
            "id": 47,
            "pid": 1,
            "type": "30",
            "name": "会议会务",
            "image": "",
            "keywords": "",
            "description": "会议会务",
            "weight": 0,
            "status": null
        },
        {
            "id": 48,
            "pid": 47,
            "type": "31",
            "name": "各乡镇分会场",
            "image": "",
            "keywords": "",
            "description": "各乡镇分会场",
            "weight": 0,
            "status": null
        },
        {
            "id": 49,
            "pid": 1,
            "type": "32",
            "name": "便民服务",
            "image": "",
            "keywords": "",
            "description": "便民服务",
            "weight": 0,
            "status": null
        },
        {
            "id": 50,
            "pid": 49,
            "type": "33",
            "name": "惠民政策",
            "image": "",
            "keywords": "",
            "description": "惠民政策",
            "weight": 0,
            "status": null
        },
        {
            "id": 51,
            "pid": 49,
            "type": "34",
            "name": "招聘信息",
            "image": "",
            "keywords": "",
            "description": "招聘信息",
            "weight": 0,
            "status": null
        },
        {
            "id": 52,
            "pid": 49,
            "type": "35",
            "name": "农特产品发布",
            "image": "",
            "keywords": "",
            "description": "农特产品发布",
            "weight": 0,
            "status": null
        },
        {
            "id": 53,
            "pid": 28,
            "type": "36",
            "name": "组工快讯",
            "image": "",
            "keywords": "",
            "description": "组工快讯-1",
            "weight": 0,
            "status": null
        },
        {
            "id": 54,
            "pid": 28,
            "type": "37",
            "name": "基层党建",
            "image": "",
            "keywords": "",
            "description": "组工快讯-2",
            "weight": 0,
            "status": 0
        },
        {
            "id": 55,
            "pid": 28,
            "type": "38",
            "name": "选派选聘",
            "image": "",
            "keywords": "",
            "description": "组工快讯-3",
            "weight": 0,
            "status": 0
        },
        {
            "id": 56,
            "pid": 39,
            "type": "39",
            "name": "为民务实清廉",
            "image": "",
            "keywords": "",
            "description": "为民务实清廉",
            "weight": 0,
            "status": 0
        },
        {
            "id": 57,
            "pid": 56,
            "type": "40",
            "name": "为民",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 58,
            "pid": 56,
            "type": "41",
            "name": "务实",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 59,
            "pid": 56,
            "type": "42",
            "name": "清廉",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 60,
            "pid": 43,
            "type": "43",
            "name": "构建平安城市",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 61,
            "pid": 60,
            "type": "44",
            "name": "构建平安城市1",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 62,
            "pid": 60,
            "type": "45",
            "name": "构建平安城市2",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 63,
            "pid": 60,
            "type": "46",
            "name": "构建平安城市3",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 64,
            "pid": 49,
            "type": "",
            "name": "便民服务",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 65,
            "pid": 64,
            "type": "",
            "name": "便民通知",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 66,
            "pid": 64,
            "type": "",
            "name": "社会服务",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 67,
            "pid": 64,
            "type": "",
            "name": "公共服务",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 68,
            "pid": 18,
            "type": "",
            "name": "党务村务",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 69,
            "pid": 68,
            "type": "",
            "name": "远口镇",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 70,
            "pid": 68,
            "type": "",
            "name": "坌处镇",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 71,
            "pid": 68,
            "type": "",
            "name": "地湖乡",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 72,
            "pid": 68,
            "type": "",
            "name": "渡马镇",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 73,
            "pid": 68,
            "type": "",
            "name": "邦洞街道",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 74,
            "pid": 68,
            "type": "",
            "name": "坪地镇",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 75,
            "pid": 68,
            "type": "",
            "name": "江东镇",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 76,
            "pid": 68,
            "type": "",
            "name": "白市镇",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 77,
            "pid": 68,
            "type": "",
            "name": "注溪乡",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 78,
            "pid": 68,
            "type": "",
            "name": "瓮洞镇",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 79,
            "pid": 68,
            "type": "",
            "name": "石洞镇",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 80,
            "pid": 68,
            "type": "",
            "name": "社学街道",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 81,
            "pid": 68,
            "type": "",
            "name": "蓝田镇",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 82,
            "pid": 68,
            "type": "",
            "name": "凤城街道办事处",
            "image": "http://10.200.48.3:10001/article/article/upload/image/fcf4dc49-7b5f-47c5-ae89-188ab3f412b7.jpg",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 83,
            "pid": 82,
            "type": "",
            "name": "祥和村",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 84,
            "pid": 69,
            "type": "",
            "name": "村1",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 85,
            "pid": 69,
            "type": "",
            "name": "村2",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 1
        },
        {
            "id": 86,
            "pid": 28,
            "type": "",
            "name": "党务指南",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 87,
            "pid": 69,
            "type": "",
            "name": "村3",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 88,
            "pid": 69,
            "type": "",
            "name": "村4",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 89,
            "pid": 69,
            "type": "",
            "name": "村5",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 90,
            "pid": 69,
            "type": "",
            "name": "村6",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 91,
            "pid": 69,
            "type": "",
            "name": "村7",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 92,
            "pid": 69,
            "type": "",
            "name": "村8",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 93,
            "pid": 69,
            "type": "",
            "name": "村9",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 94,
            "pid": 69,
            "type": "",
            "name": "村10",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 95,
            "pid": 1,
            "type": "",
            "name": "实时信息",
            "image": "",
            "keywords": "",
            "description": "",
            "weight": 0,
            "status": 0
        },
        {
            "id": 96,
            "pid": 30,
            "type": "12",
            "name": "特色黎平1",
            "image": "",
            "keywords": "",
            "description": "侗都黎平",
            "weight": 0,
            "status": null
        },
        {
            "id": 97,
            "pid": 30,
            "type": "12",
            "name": "特色黎平2",
            "image": "",
            "keywords": "",
            "description": "侗都黎平",
            "weight": 0,
            "status": null
        }
    ];

    var result = [];

    var children = [];

    var returnData = [];

    function buildTree(data) {
        for (var i = 0; i < data.length; i++) {
            findChildNodes(data[i].id, data);
        }
    }

    function findChildNodes(pid, data) {
        for (var i = 0; i < data.length; i++) {
            if (pid == data[i].id) {
                // 递归找到所有子节点
                recursionNode(data, data[i], pid);
                if (children.length > 0) {
                    if (pid == 1 ){
                        data[i].children = children;
                        returnData.push(data[i]);
                    } else {

                    }
                } else {
                }
                children = [];
            }
        }
    }


    function recursionNode(nodeList, node, pid) {
        var childList = getChildList(nodeList, node);
        if (childList.length > 0) {
            if (node.pid === pid) {
                node.children = childList;
                children.push(node);
            }
            for (var i = 0; i < childList.length; i++) {
                recursionNode(nodeList, childList[i], pid);
            }
        } else {
            result.push(node);
        }
    }

    function getChildList(list, node) {
        var nodeList = [];
        for (var i = 0; i < list.length; i++) {
            if (list[i].pid === node.id) {
                nodeList.push(list[i]);
            }
        }
        return nodeList;
    }

    buildTree(data);
    console.log(returnData);
</script>
</html>